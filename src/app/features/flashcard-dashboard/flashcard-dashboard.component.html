<div class="row mb-3">
  <button id="add-button" (click)="toggleAddNewFlashCard()">Add Flashcard</button>
</div>

@if (showFlashCards === "show") {
  <div class="flashcard-grid">
    @for (flashCard of flashCards; track $index) {
      <app-flashcard [flashCard]="flashCard" (edit)="editFlashcard($event)" (delete)="deleteFlashcard($event)" class="flashcard-wrapper"></app-flashcard>
      <div class="buttons"></div>
    }
  </div>
  
}


@else if (showFlashCards === "addNew") {
  <div class="new-flashcard-form">
    <h3>Create a New Flashcard</h3>
    <div class="form-group">
      <label for="question">Question</label>
      <input type="text" id="question" [(ngModel)]="newQuestion" class="form-control">
    </div>
    <div class="form-group">
      <label for="answer">Answer</label>
      <input type="text" id="answer" [(ngModel)]="newAnswer" class="form-control">
    </div>
    
    <h4>Options</h4>
    @for (option of newOptions; track $index) {
      <div class="form-group d-flex align-items-center gap-2">

        <div class="flex-grow-1">
          <label for="option{{$index}}">Option {{$index + 1}}</label>
          <input type="text" id="option{{$index}}" [(ngModel)]="newOptions[$index]" class="form-control">
        </div>
        <button type="button" class="btn btn-sm btn-danger mt-4" (click)="removeKeypoint($index)">Remove</button>
      </div>
    }
      
    <button (click)="addOption()" class="btn btn-sm btn-outline-primary mb-2 mt-5">+ Add Option</button>
    <div class="form-actions">
      <button (click)="saveNewFlashcard()" class="btn btn-primary">Save</button>
      <button (click)="cancel()" class="btn btn-secondary">Cancel</button>
    </div>
  </div>
}

@else if (showFlashCards === "edit") {
  <div class="new-flashcard-form">
    <h3>Edit Flashcard</h3>
    <div class="form-group">
      <label for="question">Question</label>
      <input type="text" id="question" [(ngModel)]="newQuestion" class="form-control">
    </div>
    <div class="form-group">
      <label for="answer">Answer</label>
      <input type="text" id="answer" [(ngModel)]="newAnswer" class="form-control">
    </div>
    <h4>Options</h4>
    @for (option of newOptions; track $index) {
      <div class="form-group d-flex align-items-center gap-2">

        <div class="flex-grow-1">
          <label for="option{{$index}}">Option {{$index + 1}}</label>
          <input type="text" id="option{{$index}}" [(ngModel)]="newOptions[$index]" class="form-control">
        </div>
        <button type="button" class="btn btn-sm btn-danger mt-4" (click)="removeKeypoint($index)">Remove</button>
      </div>
    }
      
    <button (click)="addOption()" class="btn btn-sm btn-outline-primary mb-2 mt-5">+ Add Option</button>
    <div class="form-actions">
      <button (click)="updateFlashcard()" class="btn btn-success">Update</button>
      <button (click)="cancel()" class="btn btn-secondary">Cancel</button>
    </div>
  </div>
}
